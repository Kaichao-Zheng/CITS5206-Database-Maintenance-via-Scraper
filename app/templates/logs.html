{% extends 'layout.html' %}
{% block main_content %}
<div class="w-full flex justify-center items-start h-full">
	<div class="bg-white border border-gray-300 rounded-xl overflow-x-auto overflow-y-auto" style="width:900px;min-height:600px;max-height:700px;box-shadow:0 2px 8px rgba(98,0,238,0.08);">
		<!-- Tab Header -->
		<div class="flex" style="position:sticky;top:0;z-index:10;">
			<div class="flex-1 text-center py-3 font-medium text-violet-700 bg-violet-200" style="border-bottom:4px solid #fff;border-top-left-radius:12px;letter-spacing:1px;">DATA</div>
			<div class="flex-1 text-center py-3 font-medium text-white bg-violet-700" style="border-bottom:4px solid #6200EE;border-top-right-radius:12px;letter-spacing:1px;">LOG</div>
		</div>
		<!-- Table -->
		<table class="w-full text-left" style="border-collapse:separate;border-spacing:0;font-family:'Roboto',sans-serif;">
			<thead>
				<tr style="background:#fafafa;">
					<th class="py-3 px-4 font-semibold text-gray-700" style="width:220px;">Date</th>
					<th class="py-3 px-4 font-semibold text-gray-700">Summary</th>
				</tr>
			</thead>
			<tbody>
				<tr class="border-t" style="border-top:1px solid #e0e0e0;">
					<td class="py-3 px-4 align-top" style="vertical-align:top;">12/07/2025 12:12:12</td>
					<td class="py-3 px-4">
						<div style="display:flex;align-items:center;gap:8px;">
							<span>Updated data. Successfully matched 1000 rows. Failed 12 rows.</span>
							<span class="cursor-pointer select-none" onclick="toggleLogDetail(this)">
								<svg class="arrow-icon" width="18" height="18" viewBox="0 0 20 20" fill="none" style="vertical-align:middle;">
									<path d="M6 8l4 4 4-4" stroke="#6200EE" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								</svg>
							</span>
						</div>
						<div class="mt-2 text-sm text-gray-600 log-detail" style="white-space:pre-line;display:none;">
							&lt;log id&gt;
							<br>Failed fetching for &lt;name&gt; from &lt;url&gt; : row &lt;row number&gt;
							<br>Failed fetching for &lt;name&gt; from &lt;url&gt; : row &lt;row number&gt;
							<br>Failed fetching for &lt;name&gt; from &lt;url&gt; : row &lt;row number&gt;
							<br>Failed fetching for &lt;name&gt; from &lt;url&gt; : row &lt;row number&gt;
							<br>Failed fetching for &lt;name&gt; from &lt;url&gt; : row &lt;row number&gt;
							<br>Failed fetching for &lt;name&gt; from &lt;url&gt; : row &lt;row number&gt;
							<br>Failed fetching for &lt;name&gt; from &lt;url&gt; : row &lt;row number&gt;
							<br>Failed fetching for &lt;name&gt; from &lt;url&gt; : row &lt;row number&gt;
						</div>
					</td>
				</tr>
				{% for i in range(6) %}
				<tr class="border-t" style="border-top:1px solid #e0e0e0;">
					<td class="py-3 px-4">12/07/2025 12:12:12</td>
					<td class="py-3 px-4">Updated data. Successfully matched 1000 rows. Failed 12 rows.</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
</div>
<style>
	/* 保证内容区固定宽度和最大高度，内容溢出时显示竖向滚动条 */
	.overflow-y-auto {
		overflow-y: auto;
	}
</style>
<script>
function toggleLogDetail(arrowSpan) {
	const detail = arrowSpan.parentElement.parentElement.querySelector('.log-detail');
	if (detail.style.display === 'none' || detail.style.display === '') {
		detail.style.display = 'block';
		arrowSpan.querySelector('.arrow-icon').style.transform = 'rotate(180deg)';
	} else {
		detail.style.display = 'none';
		arrowSpan.querySelector('.arrow-icon').style.transform = 'rotate(0deg)';
	}
}
</script>
{% endblock %}